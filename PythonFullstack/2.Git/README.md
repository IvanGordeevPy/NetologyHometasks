# **Git_Tutorial**

## **Задание глобальных настроек**
---

Текущие настройки:

`git config --global --list`

Задать юзернейм:

`git config --global user.name "Emma Paris"`

Задать email:

`git config --global user.email "eparis@atlassian.com"`

Настройка формата строк на Windows: 

`git config --global core.autocrlf true` 

`git config --global core.safecrlf warn`

`git config --global core.quotepath off`

Задать название основной ветки:

`git config --global init.defaultBranch main`

## **Работа с локальным репозиторием**
---

`git init` - инициализировать репозиторий (находясь в папке)

`git status` - проверить состояние репозитория

`git add file_name` - добавить файл в ослеживаемые *(`-A` - добавить все файлы)*. Требуется выполнять после каждого изменения файла

`git commit -m "Description"` - сделать снимок отслеживаемых файлов *(`-m "Description"` - добавить описание коммита; если коммит успешный, то при вызове `git status` появится сообщение "nothing to commit")*

` git commit --amend -m "New description" ` - исправление последнего коммита, только в локальном репозитории! *(можно менять как название коммита, так и его содержимое)*

`git revert commit_hash` - отменить изменения, которые были внесены в последний коммит. Для выхода из режима редактирования после введения этой команды нажимаем `CTRL+X`, затем вводим `:wq`, `Enter`. При выполнении команды могут возникать конфликты *(см. `git merge`)*

`git log --all --oneline` - просмотр истории проекта — списка коммитов *( `--all` - покажет всю историю проекта; `--oneline` - короткая форма вывода информации; `HEAD` - указывает на коммит, где сейчас находимся)*

`git checkout commit_hash` - переключиться на коммит с хешем *`commit_hash`*

`git checkout -` или `git checkout main` - вернуться к `main` коммиту

`cd folder_name` - переключиться на папку с названием `folder_name`, нажатие кнопки `TAB` автоматически введет название папки по первым символам

`cd ..` - "подняться" вверх в проводнике

Если при работе в локальном репозитории имеются файлы, которые необходимо проигнорировать при публикации на GitHub (до ввода команды `git add`), следует воспользоваться файлом-настройкой `.gitignore`:
* Файл `.gitignore` должен создаваться в корневой папке проекта
* Для игнорирования файлов корневой папки, их названия следует вводить с новой строки в файле `.gitignore`
  * Для игнорирования всех файлов `file_name.md` во всех папках проекта просто вводим их названия
  * Для игнорирования файла `file_name.md` в папке `folder_name/` используем формат записи `folder_name/file_name.md`
  * Для игнорирования папок используется формат со слешем: `folder_name/`
  * Для игнорирования всех файлов с окончанием названия `end` исползуем формат записи `*end`
* Если файл, который нужно проигнорировать уже проиндексирован (была использована команда `git add`), его можно удалить из отслеживаемых:
  * Добавляем правило игнорирования в файл `.gitignore`
  * Используем команду `git rm --cached file_name` - Git перестает следить за файлом или папкой

## **Работа с удаленным репозиторием**
---

*Альтернативы GitHub: GitLab, Bitbucket*

### **Привязываем компьютер к GitHub**

Для привязки текущего компьютера к GitHub, т.е. для получения возможности отправлять изменения из терминала в удаленный репо и наоборот, требуется воспользоваться SSH-ключом:

`ssh keygen` - генерация SSH-ключа (несколько раз нажимаем enter)

В строчке `Your public key...` копируем окончание пути с момента `/.ssh/` и вставляем в следующую команду:

`cat ~/.ssh/...` - вывести SSH-ключ на экран (копируем все, вместе с `ssh-rsa`)

Далее идем на гитхаб, даем имя компьютеру, вставляем SSH-ключ и подтверждаем.

### **Связать локальный репозиторий с удаленным**

Находясь в терминале в локальном репозитории:

`git remote -v` - вывести список существующих связей с локальным репозиторием

`git remote add origin SSH-link` - создать связь между локальным и удаленным репозиторием с названием origin (общепринятое название главной связи), где `SSH-link` - ссылка, получаемая из репозитория в GitHub

`git remote remove origin` - удалить связь `origin`

`git push -u origin main` - отправить выбранный коммит по связи `origin` в удаленный репозиторий. Флаг `-u` задает связь по умолчанию для `git push`

### **Fork и клонирование репозитория**

На странице репозитория в GitHub кнопка `Fork` позволяет создать копию репозитория для самостоятельной работы в нем (создается удаленный репозиторий)

`git clone SSH-link folder_name` - склонировать удаленный репозиторий на компьютер (создание связанного с удаленным локального репозитория). `folder_name` (опционально) задает имя папки, в которую будет склонирован репозиторий

### **Применение issues**

Issues - система ведения задач проекта в GitHub

Чтобы создать issue на странице репозитория проекта, находим вкладку `Issues` и нажимаем кнопку `New issue`
* Чтобы упомянуть другого участника в тексте задачи, набираем символ @ и пишем имя пользователя на GitHub
* Чтобы ссылаться на другие задачи или pull request, набираем символ # и пишем номер задачи или запроса на слияние

## **Работа с ветками**
---

Для подсветки веток в терминале поможет расширение [Oh my Zsh](https://ohmyz.sh/)

`git branch` - выводит названия всех существующих веток проекта (звездочка показывает, в какой ветке сейчас находимся)

`git branch new-branch` - создаст ветку с названием `new-branch`

`git checkout new-branch` - переключиться на ветку `new-branch` (теперь все изменения в локальном репозитории будут происходить только в этой ветке)

`git push -u origin new-branch` - отправить ветку `new-branch` в удаленный репозиторий (теперь переключаться между ветками можно на GitHub)

`git log new-branch --graph --oneline` - посмотреть историю конкретной ветки *(`--graph` - для чего?)*

Для слияния веток требуется находится в той ветке, которая вберет в себя "вбираемую ветку" (обычно, сливаем другие ветки в ветку `main`)

`git merge new-branch` - выполнить слияние веток

Если при слиянии возникает конфликт: 
* Сперва исправляем его в рабочей среде (VS Code / PyCharm). *От <<<<<<< HEAD и до ======= находятся первая версия, **в которую** сливаем изменения. От ======= до >>>>>>> fix находится вторая версия, **из которой** сливаем изменения*
* Совершаем коммит изменений: `git add -A` → `git commit -m "conflict resolved"`

При работе в команде не всегда удастся выполнить `git push`, тк локальный репозиторий мог устареть. Его требуется актуализировать:

`git pull` - получение изменений из удаленного репозитория в локальный. Эта команда состоит из двух: `git fetch` *(забирает изменения из удалённого репозитория и сохраняет их в промежуточном состоянии, не применяя к файлам на компьютере)* и `git merge`. Поэтому могут возникнуть конфликты, разрешаемые ровно так же, как и при слиянии веток



## **Справка**
---

`git help -g` - подсказка по всем командам

`git help команда` - подсказка по конкретной команде

`Q` - выход из справки